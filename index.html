<!doctype html>
<html lang="en">
    <!-- https://github.com/supermedium/aframe-environment-component -->
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Project WebXR</title>
        <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
        <script src="//cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
        <script src="https://rawgit.com/caseyyee/aframe-ui-widgets/master/dist/ui-widgets.min.js"></script>

        <script src="highlight.js"></script>
        <script src="info-panel.js"></script>
    </head>

    <body>
        <a-scene
            environment
            cursor="rayOrigin: mouse; fuse: false"
            raycaster="objects: .raycastable"
            camera
        >
            <a-assets>
                <a-asset-item
                    id="pokemon"
                    src="models/pokemon/pokemon.gltf"
                ></a-asset-item>
                <a-asset-item
                    id="scene"
                    src="models/scene2/scene.gltf"
                ></a-asset-item>
                <a-asset-item
                    id="kirby"
                    src="models/kirby/kirby.gltf"
                ></a-asset-item>
                <a-asset-item
                    id="pokeball"
                    src="models/pokeball/scene.gltf"
                ></a-asset-item>

                <a-asset-item
                    id="totoro"
                    src="models/totoro/totoro.gltf"
                ></a-asset-item>

                <img id="mononoke" src="images/mononoke.jpeg" />
                <img id="mononokePoster" src="images/mononoke-poster.jpeg" />
                <img
                    id="ponyo"
                    src="https://cdn.aframe.io/examples/ui/ponyo.jpg"
                    crossorigin="anonymous"
                />
                <img
                    id="ponyoPoster"
                    src="https://cdn.aframe.io/examples/ui/ponyoPoster.jpg"
                    crossorigin="anonymous"
                />
                <img
                    id="karigurashi"
                    src="https://cdn.aframe.io/examples/ui/karigurashi.jpg"
                    crossorigin="anonymous"
                />
                <img
                    id="karigurashiPoster"
                    src="https://cdn.aframe.io/examples/ui/karigurashiPoster.jpg"
                    crossorigin="anonymous"
                />
                <a-mixin
                    id="frame"
                    geometry="primitive: plane; width: 0.5783552; height: 0.8192"
                    material="color: white; shader: flat"
                    animation__scale="property: scale; to: 1.2 1.2 1.2; dur: 200; startEvents: mouseenter"
                    animation__scale_reverse="property: scale; to: 1 1 1; dur: 200; startEvents: mouseleave"
                ></a-mixin>
                <a-mixin
                    id="poster"
                    geometry="primitive: plane; width: 0.544768; height: 0.786432"
                    material="color: white; shader: flat"
                    material="shader: flat"
                    position="0 0 0.005"
                ></a-mixin>
                <a-mixin
                    id="movieImage"
                    geometry="primitive: plane; width: 1.5; height: 0.81"
                    material="src: #ponyo; shader: flat; transparent: true"
                    position="0 0.495 0.002"
                ></a-mixin>
            </a-assets>

            <a-entity
                camera="active: true"
                look-controls
                universal-controls
                wasd-controls
                position="0 1.7 0"
            ></a-entity>

            <a-text
                value="Developed by Kevin Uehara"
                height="1.5"
                width="1.5"
                color="#000"
                position="-0.4 2 -0.5"
                rotation="13 0 1"
            ></a-text>

            <!-- Scene Settings -->

            <!-- Background Panels Settings -->
            <a-entity
                id="background"
                position="0 0 0"
                geometry="primitive: sphere; radius: 2.0"
                material="color: red; side: back; shader: flat"
                scale="0.001 0.001 0.001"
                visible="false"
                class="raycastable"
            >
            </a-entity>

            <a-entity position="0 1.6 0">
                <a-entity
                    id="fadeBackground"
                    geometry="primitive: sphere; radius: 2.5"
                    material="color: #C3C3C3; side: back; shader: flat; transparent: true; opacity: 0.1"
                    visible="false"
                >
                </a-entity>
            </a-entity>

            <!-- MODELS -->
            <a-entity
                gltf-model="#pokemon"
                position="0.7 0.4 -0.5"
                rotation="-25 100 -10"
                scale="0.3 0.3 0.3"
                animation="property: object3D.position.y; to: 0.9; dir: alternate; dur: 4000; loop: true"
            ></a-entity>

            <a-entity
                gltf-model="#kirby"
                position="-0.3 0.35 -0.4"
                scale="0.1 0.1 0.1"
            ></a-entity>

            <a-entity
                gltf-model="#pokeball"
                position="1 0.8 1"
                scale="0.07 0.07 0.1"
                rotation="0 240 0"
            ></a-entity>

            <a-entity
                gltf-model="#totoro"
                position="-1 0.26 0.5"
                scale="0.75 0.75 0.75"
                rotation="0 120 0"
            ></a-entity>

            <a-sphere
                color="#facc15"
                position="30 50 -40"
                radius="1.8"
            ></a-sphere>

            <!-- <a-entity gltf-model="#scene" position="0 -5 0"></a-entity> -->
            <a-entity
                environment="preset: japan; dressingAmount: 8;  grid: cross; groundColor: #166534; groundColor2: #15803d ;shadow: true; ground: hills; seed: 6; skyType: gradient; horizonColor: #22d3ee"
                position="0 0.2 0"
            ></a-entity>

            <a-light type="point" intensity="1" position="2 4 4"></a-light>

            <!-- Hands Settings -->
            <a-entity
                id="leftHand"
                laser-controls="hand: left"
                raycaster="objects: .raycastable"
            ></a-entity>

            <a-entity
                id="rightHand"
                laser-controls="hand: right"
                raycaster="objects: .raycastable"
                line="color: #118A7E"
            ></a-entity>

            <a-entity id="ui" position="0 1 -2.5">
                <!-- Poster menu -->
                <a-entity id="menu" highlight>
                    <a-entity
                        id="karigurashiButton"
                        position="-0.8 0 1.2"
                        mixin="frame"
                        class="raycastable menu-button"
                    >
                        <a-entity
                            material="src: #karigurashiPoster;"
                            mixin="poster"
                        ></a-entity>
                    </a-entity>

                    <a-entity
                        id="mononokeButton"
                        position="0 0 1.2"
                        mixin="frame"
                        class="raycastable menu-button"
                    >
                        <a-entity
                            material="src: #mononokePoster"
                            mixin="poster"
                        ></a-entity>
                    </a-entity>

                    <a-entity
                        id="ponyoButton"
                        position="0.8 0 1.2"
                        mixin="frame"
                        class="raycastable menu-button"
                    >
                        <a-entity
                            material="src: #ponyoPoster"
                            mixin="poster"
                        ></a-entity>
                    </a-entity>
                </a-entity>

                <a-entity
                    id="infoPanel"
                    position="0 0.2 1.3"
                    info-panel
                    visible="false"
                    scale="0.001 0.001 0.001"
                    geometry="primitive: plane; width: 1.5; height: 1.8"
                    material="color: #333333; shader: flat; transparent: false"
                    class="raycastable"
                >
                    <a-entity
                        id="ponyoMovieImage"
                        mixin="movieImage"
                        material="src: #ponyo"
                        visible="false"
                    ></a-entity>
                    <a-entity
                        id="mononokeMovieImage"
                        mixin="movieImage"
                        material="src: #mononoke"
                        visible="false"
                    ></a-entity>
                    <a-entity
                        id="karigurashiMovieImage"
                        mixin="movieImage"
                        material="src: #karigurashi"
                        visible="false"
                    ></a-entity>
                    <a-entity
                        id="movieTitle"
                        position="-0.68 -0.1 0"
                        text="shader: msdf; anchor: left; width: 1.5; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: Ponyo (2003)"
                    ></a-entity>
                    <a-entity
                        id="movieDescription"
                        position="-0.68 -0.2 0"
                        text="baseline: top; shader: msdf; anchor: left; font: https://cdn.aframe.io/examples/ui/Viga-Regular.json; color: white; value: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                    ></a-entity>
                </a-entity>
            </a-entity>
        </a-scene>
    </body>
</html>
